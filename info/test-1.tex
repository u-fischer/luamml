% !Mode:: "TeX:DE:UTF-8:Main"
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\DocumentMetadata{uncompress,pdfversion=2.0,testphase={phase-III,math,table},xmp=false}

\documentclass{article}
\usepackage{unicode-math}
\usepackage{luamml}

\begin{document}
This example will produce a test-mathml.txt file with three mathml chunks.
Nothing is added to the PDF.
\ExplSyntaxOn
% This sets a file name for the export. 
% If more than one export is needed, the name should contains some number
\luamml_set_filename:n {test-mathml.txt}
% this starts the process. math 
% sets flag to 3, not really needed, as it is the default
% but set here for clarity:
\luamml_flag_process: 

\luamml_begin_single_file:
\ExplSyntaxOff
$a+b=x^2 -1 $

$1=1$

\ExplSyntaxOn
% sets the flag to 0 and following math is ignored
\luamml_flag_ignore: 
$1=0$

% restart
\luamml_flag_process: 
$ 2=1+1 $
\luamml_end_single_file:
\ExplSyntaxOff
\end{document}
